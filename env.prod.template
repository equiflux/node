# Equiflux Node 环境配置模板
# 复制此文件为 .env.prod 并修改为生产环境配置

# 应用版本
EQUIFLUX_VERSION=1.0.0

# 端口配置
RPC_PORT=8080
MANAGEMENT_PORT=8081
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000
NODE_EXPORTER_PORT=9100
LOKI_PORT=3100

# 数据路径配置
DATA_PATH=/opt/equiflux/data
LOGS_PATH=/opt/equiflux/logs
CONFIG_PATH=/opt/equiflux/config

# Grafana配置
GRAFANA_PASSWORD=Equiflux2024!@#

# JVM配置
JAVA_OPTS=-Xms4g -Xmx8g -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -XX:+UseStringDeduplication -XX:+OptimizeStringConcat -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/app/logs/heapdump.hprof

# Spring配置
SPRING_PROFILES_ACTIVE=prod
SERVER_PORT=8080

# 共识配置
EQUIFLUX_CONSENSUS_SUPER_NODE_COUNT=50
EQUIFLUX_CONSENSUS_CORE_NODE_COUNT=20
EQUIFLUX_CONSENSUS_ROTATE_NODE_COUNT=30
EQUIFLUX_CONSENSUS_BLOCK_TIME_SECONDS=3
EQUIFLUX_CONSENSUS_VRF_COLLECTION_TIMEOUT_MS=3000
EQUIFLUX_CONSENSUS_BLOCK_PRODUCTION_TIMEOUT_MS=5000
EQUIFLUX_CONSENSUS_REWARDED_TOP_X=15
EQUIFLUX_CONSENSUS_POW_BASE_DIFFICULTY=2500000
EQUIFLUX_CONSENSUS_POW_TARGET_TIME_SECONDS=3
EQUIFLUX_CONSENSUS_MIN_STAKE_CORE=100000
EQUIFLUX_CONSENSUS_MIN_STAKE_ROTATE=50000
EQUIFLUX_CONSENSUS_MAX_TRANSACTIONS_PER_BLOCK=1000
EQUIFLUX_CONSENSUS_MAX_BLOCK_SIZE_MB=2

# 网络配置
EQUIFLUX_NETWORK_PORT=8080
EQUIFLUX_NETWORK_MAX_CONNECTIONS=200
EQUIFLUX_NETWORK_CONNECTION_TIMEOUT_MS=30000
EQUIFLUX_NETWORK_READ_TIMEOUT_MS=60000
EQUIFLUX_NETWORK_WRITE_TIMEOUT_MS=30000
EQUIFLUX_NETWORK_HEARTBEAT_INTERVAL_MS=30000
EQUIFLUX_NETWORK_HEARTBEAT_TIMEOUT_MS=90000
EQUIFLUX_NETWORK_MAX_MESSAGE_SIZE=1048576
EQUIFLUX_NETWORK_BUFFER_SIZE=65536
EQUIFLUX_NETWORK_MESSAGE_EXPIRATION_MS=300000
EQUIFLUX_NETWORK_TCP_NO_DELAY=true
EQUIFLUX_NETWORK_KEEP_ALIVE=true
EQUIFLUX_NETWORK_REUSE_ADDRESS=true
EQUIFLUX_NETWORK_MAX_RETRY_ATTEMPTS=3
EQUIFLUX_NETWORK_RETRY_INTERVAL_MS=5000
EQUIFLUX_NETWORK_PEER_DISCOVERY_INTERVAL_MS=60000
EQUIFLUX_NETWORK_MAX_PEERS=100
EQUIFLUX_NETWORK_MIN_PEERS=10
EQUIFLUX_NETWORK_PEER_EXPIRATION_MS=300000
EQUIFLUX_NETWORK_AUTO_RECONNECT=true
EQUIFLUX_NETWORK_RECONNECT_INTERVAL_MS=10000
EQUIFLUX_NETWORK_ENABLE_COMPRESSION=true
EQUIFLUX_NETWORK_COMPRESSION_LEVEL=6
EQUIFLUX_NETWORK_ENABLE_ENCRYPTION=true
EQUIFLUX_NETWORK_ENABLE_SIGNATURE_VERIFICATION=true
EQUIFLUX_NETWORK_ENABLE_MESSAGE_DEDUPLICATION=true
EQUIFLUX_NETWORK_MESSAGE_DEDUPLICATION_CACHE_SIZE=10000
EQUIFLUX_NETWORK_ENABLE_MONITORING=true
EQUIFLUX_NETWORK_MONITORING_INTERVAL_MS=10000
EQUIFLUX_NETWORK_ENABLE_DEBUG_LOGGING=false
EQUIFLUX_NETWORK_ENABLE_PERFORMANCE_STATS=true
EQUIFLUX_NETWORK_WORKER_THREADS=16
EQUIFLUX_NETWORK_BOSS_THREADS=2
EQUIFLUX_NETWORK_USE_EPOLL=true
EQUIFLUX_NETWORK_USE_NIO=true
EQUIFLUX_NETWORK_USE_ZERO_COPY=true
EQUIFLUX_NETWORK_USE_DIRECT_MEMORY=true
EQUIFLUX_NETWORK_MAX_DIRECT_MEMORY=536870912
EQUIFLUX_NETWORK_ENABLE_MEMORY_POOL=true
EQUIFLUX_NETWORK_MEMORY_POOL_SIZE=134217728
EQUIFLUX_NETWORK_ENABLE_OBJECT_POOL=true
EQUIFLUX_NETWORK_OBJECT_POOL_SIZE=2000

# RPC配置
EQUIFLUX_RPC_PORT=8080
EQUIFLUX_RPC_ENABLED=true
EQUIFLUX_RPC_MAX_REQUEST_SIZE=1048576
EQUIFLUX_RPC_REQUEST_TIMEOUT_MS=30000
EQUIFLUX_RPC_MAX_CONCURRENT_REQUESTS=200
EQUIFLUX_RPC_ENABLE_CORS=true
EQUIFLUX_RPC_CORS_ALLOWED_ORIGINS=*
EQUIFLUX_RPC_CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
EQUIFLUX_RPC_CORS_ALLOWED_HEADERS=*
EQUIFLUX_RPC_ENABLE_REQUEST_LOGGING=true
EQUIFLUX_RPC_ENABLE_RESPONSE_LOGGING=false
EQUIFLUX_RPC_LOG_LEVEL=INFO
EQUIFLUX_RPC_ENABLE_METHOD_STATS=true
EQUIFLUX_RPC_STATS_WINDOW_SECONDS=60
EQUIFLUX_RPC_ENABLE_RATE_LIMIT=true
EQUIFLUX_RPC_RATE_LIMIT_PER_SECOND=200
EQUIFLUX_RPC_RATE_LIMIT_BURST_SIZE=400
EQUIFLUX_RPC_ENABLE_AUTH=false
EQUIFLUX_RPC_AUTH_TOKEN=
EQUIFLUX_RPC_ENABLE_SSL=false
EQUIFLUX_RPC_SSL_CERT_FILE=
EQUIFLUX_RPC_SSL_KEY_FILE=
EQUIFLUX_RPC_ENABLE_COMPRESSION=true
EQUIFLUX_RPC_COMPRESSION_LEVEL=6
EQUIFLUX_RPC_ENABLE_KEEP_ALIVE=true
EQUIFLUX_RPC_KEEP_ALIVE_TIMEOUT_MS=30000
EQUIFLUX_RPC_MAX_KEEP_ALIVE_REQUESTS=100
EQUIFLUX_RPC_ENABLE_HTTP2=true
EQUIFLUX_RPC_THREAD_POOL_CORE_SIZE=20
EQUIFLUX_RPC_THREAD_POOL_MAX_SIZE=100
EQUIFLUX_RPC_THREAD_POOL_QUEUE_CAPACITY=2000
EQUIFLUX_RPC_THREAD_POOL_KEEP_ALIVE_SECONDS=60
EQUIFLUX_RPC_THREAD_POOL_THREAD_NAME_PREFIX=rpc-

# 日志配置
LOGGING_LEVEL_IO_EQUIFLUX_NODE=INFO
LOGGING_LEVEL_ORG_SPRINGFRAMEWORK=WARN
LOGGING_FILE_NAME=logs/equiflux-node.log
LOGGING_FILE_MAX_SIZE=100MB
LOGGING_FILE_MAX_HISTORY=30

# 管理端点配置
MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE=health,info,metrics,prometheus
MANAGEMENT_ENDPOINT_HEALTH_SHOW_DETAILS=always
MANAGEMENT_METRICS_EXPORT_PROMETHEUS_ENABLED=true
